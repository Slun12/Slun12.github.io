# Python下多线程的理解

## 线程与进程
- 线程：程序执行流的最小单元。进程中的一个实体。
- 进程：操作系统进行资源分配和调度的基本单位，是操作系统结构的基础。

## 全局解释器锁
- Python代码的执行是由Python虚拟机（又名解释器主循环）进行控制的，并且在主循环中，同时只能有一个控制线程在执行。
- GIL是python的全局解释器锁，同一进程中，有多个线程运行，其中一个线程在运行Python程序时会霸占Python解释器（即给解释器加了一把锁GIL），使得进程中
其它线程无法运行；只有等待该线程运行完后，或者该线程运行中遇到耗时操作时，解释器锁才会解开，是其它线程运行。
- Python的多线程中，线程的运行仍然是有先后顺序的，并不能同时运行。
- Python下充分利用多核CPU,需用多进程。原因：多进程中，每个进程都能被系统分配资源，相对于每个进程都有一个Python解释器，所以可以实现多进程同时运行；
多进程的执行效率优于多线程（仅仅针对多核CPU）,缺点是多进程系统资源开销大。

## 避免使用thread模块(Python3中thread模块被重命名为_thread)和推荐使用threading模块
- threading模型更加先进，有更好的线程支持，并且thread模块中的一些属性会与threading模块有冲突。
- thread模块拥有的同步原语很少（实际上只有一个），而threading模块则有很多。
- thread模块对于进程何时退出没有控制。当主线程结束时，所有其它线程也都强制结束，不会发出警告或者进行适当处理。而threading模块能保证重要的子线程在
进程退出前结束。
